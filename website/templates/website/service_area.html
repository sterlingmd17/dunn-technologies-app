{% extends "website/base.html" %}
{% block title %}Service Area | Dunn Technologies{% endblock %}
{% block extra_head %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
{% endblock %}
{% block content %}
<section class="py-5">
  <div class="container">
    <h1 class="fw-bold mb-3">Service Area</h1>
    <p class="visually-hidden">We serve Greater Vancouver and the Portland metro area (map-only view below).</p>

    <div class="container-fluid px-0 position-relative mb-4">
      <div id="service-map" role="application" aria-label="Service area map (Greater Vancouver and Portland metro)"></div>
      <div class="map-legend position-absolute top-3 end-3 bg-white p-2 rounded shadow-sm small">
        <div><i class="bi bi-circle-fill text-success me-1" aria-hidden="true"></i>Greater Vancouver (~50 km)</div>
        <div><i class="bi bi-circle-fill text-success me-1" aria-hidden="true"></i>Portland Metro (~40 km)</div>
      </div>
    </div>

    <!-- map-only: other descriptive cards removed -->
    <div class="row g-4 mt-2">
      <div class="col-md-6">
        <div class="p-4 border rounded-4 h-100">
          <h2 class="h5 fw-bold">Onsite + Remote</h2>
          <p class="text-muted mb-0">Fast response for critical issues, with a preference for preventing them in the first place.</p>
        </div>
      </div>
      <div class="col-md-6">
        <div class="p-4 border rounded-4 h-100">
          <h2 class="h5 fw-bold">Business-focused</h2>
          <p class="text-muted mb-0">We serve business customers across industries and sizes—from small offices to multi-site environments.</p>
        </div>
      </div>
    </div>
  </div>
</section>
{% block extra_scripts %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  var map = L.map('service-map', { scrollWheelZoom: true }).setView([47.5, -121.0], 6);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  var vancouverCenter = [49.2827, -123.1207];
  var portlandCenter = [45.5152, -122.6784];

  // coverage circles
  var vanCircle = L.circle(vancouverCenter, { radius: 50000, color:'#1B5E3C', fillColor:'#1B5E3C', fillOpacity:0.12 }).addTo(map).bindPopup('Greater Vancouver — ~50 km radius');
  var pdxCircle = L.circle(portlandCenter, { radius: 40000, color:'#2E8B57', fillColor:'#2E8B57', fillOpacity:0.12 }).addTo(map).bindPopup('Portland Metro — ~40 km radius');

  // city markers (helpful when tiles or circles are subtle)
  L.marker(vancouverCenter).addTo(map).bindPopup('Greater Vancouver (approx center)');
  L.marker(portlandCenter).addTo(map).bindPopup('Portland metro (approx center)');

  var group = L.featureGroup([vanCircle, pdxCircle]);
  map.fitBounds(group.getBounds().pad(0.35));

  L.control.scale().addTo(map);
});
</script>
{% endblock %}
{% endblock %} 
